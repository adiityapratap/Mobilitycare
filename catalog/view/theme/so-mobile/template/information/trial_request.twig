 {{ header }}
 <link href="catalog/view/theme/so-clickboom/css/customerForms.css" rel="stylesheet" type="text/css" />

  <div class="row">{{ column_left }}
    {% if column_left and column_right %}
    {% set class = 'col-sm-6' %}
    {% elseif column_left or column_right %}
    {% set class = 'col-sm-9' %}
    {% else %}
    {% set class = 'col-sm-12' %}
    {% endif %}
     <div id="content" class="{{ class }}">{{ content_top }}
            <div class="container text-black">
                 <div class="row">
  <div class="col-sm-12 col-xs-12 text-center">
    <h3 class="text-blue" style="font-weight: 600; letter-spacing: 1px; margin-top: 20px; margin-bottom: 20px;color:#013b76">
      <span class="glyphicon glyphicon-comment" style="margin-right: 8px;"></span>
     Request a product trial
    </h3>
    <hr style="width: 60px; border-top: 3px solid #013b76; margin: 10px auto;">
  </div>
</div>
                <div class="row mt-5">
                    <div class="demo-request-container">
                     
                        <div class="demo-request-right col-md-7 col-sm-12 col-xs-12">
                            <form action="{{ action }}" method="post" id="demoRequestForm" class="quoteForm">
                                <!-- Therapist Details -->
                                <div>
                                    <input type="text" name="fullname" id="fullname" value="{{ fullname }}" placeholder="Full Name *" required>
                                    {% if error_fullname %}
                                    <div class="text-red">{{ error_fullname }}</div>
                                    {% endif %}
                                </div>
                                <div>
                                    <input type="email" name="email" id="email" value="{{ email }}" placeholder="Email *" required>
                                    {% if error_email %}
                                    <div class="text-red">{{ error_email }}</div>
                                    {% endif %}
                                </div>
                                <div>
                             <input type="text" name="phone" id="phone" value="{{ phone }}" placeholder="Phone Number (10 digits) *" maxlength="10" pattern="\d{10}" title="Please enter a 10-digit phone number" required oninput="this.value = this.value.replace(/[^0-9]/g, '');">
                                    {% if error_phone %}
                                    <div class="text-red">{{ error_phone }}</div>
                                    {% endif %}
                                </div>
                                <div>
                                    <input type="text" name="organisation" id="organisation" value="{{ organisation }}" placeholder="Organisation / Clinic *" required>
                                    {% if error_organisation %}
                                    <div class="text-red">{{ error_organisation }}</div>
                                    {% endif %}
                                </div>
                                <div>
                                    <textarea name="address" id="address" placeholder="Address *" required>{{ address }}</textarea>
                                    {% if error_address %}
                                    <div class="text-red">{{ error_address }}</div>
                                    {% endif %}
                                </div>
                                
                                 <div>
           <input type="text" name="postcode" placeholder="Postcode *" maxlength="4" pattern="^[0-9]{1,4}$" title="Please enter up to 4 digits only" oninput="this.value=this.value.replace(/[^0-9]/g,'').slice(0,4);" required>
                                </div>
                                <div>
                                    <select name="profession" id="profession" class="form-control" required>
                                        <option value="" disabled {% if not profession %}selected{% endif %}>Select Profession *</option>
                                        <option value="Occupational Therapist" {% if profession == 'Occupational Therapist' %}selected{% endif %}>Occupational Therapist</option>
                                        <option value="Physiotherapist" {% if profession == 'Physiotherapist' %}selected{% endif %}>Physiotherapist</option>
                                        <option value="Other" {% if profession == 'Other' %}selected{% endif %}>Other</option>
                                    </select>
                                    {% if error_profession %}
                                    <div class="text-red">{{ error_profession }}</div>
                                    {% endif %}
                                </div>
                                <div id="profession_other_group" style="display: {% if profession == 'Other' %}block{% else %}none{% endif %};">
                                    <input type="text" name="profession_other" id="profession_other" value="{{ profession_other }}" placeholder="Specify Profession">
                                    {% if error_profession_other %}
                                    <div class="text-red">{{ error_profession_other }}</div>
                                    {% endif %}
                                </div>
                                <!-- Client Details -->
                                <div>
                                    <input type="text" name="client_fullname" id="client_fullname" value="{{ client_fullname }}" placeholder="Client Full Name">
                                    {% if error_client_fullname %}
                                    <div class="text-red">{{ error_client_fullname }}</div>
                                    {% endif %}
                                </div>
                                <div>
<input type="text" name="client_phone" id="client_phone" value="{{ client_phone }}" placeholder="Client Phone (10 digits)" maxlength="10" pattern="\d{10}" title="Please enter a 10-digit phone number" required oninput="this.value = this.value.replace(/[^0-9]/g, '');">
                                    {% if error_client_phone %}
                                    <div class="text-red">{{ error_client_phone }}</div>
                                    {% endif %}
                                </div>
                                <div>
   <select name="manufacturer_id" id="manufacturer_id" class="form-control" required>
    <option value="" disabled {% if not manufacturer_id %}selected{% endif %}>Product Requested *</option>
    {% for manufacturer in manufacturers %}
        {% if manufacturer.name != 'AUTOCHAIR  Scooter Hoist' %}
            <option value="{{ manufacturer.manufacturer_id }}" {% if manufacturer_id == manufacturer.manufacturer_id %}selected{% endif %}>
                {{ manufacturer.name }}
            </option>
        {% endif %}
    {% endfor %}
</select>

    {% if error_manufacturer_id %}
        <div class="text-red">{{ error_manufacturer_id }}</div>
    {% endif %}
</div>

                                <div>
                                    <textarea name="notes" id="notes" placeholder="Notes">{{ notes }}</textarea>
                                </div>
                                <!-- Captcha -->
                                
                                <div>
                                  {{ captcha }}
                                </div>
                                <input type="hidden" name="originalCaptcha" value={{ originalCaptcha }}>
                                <button type="submit" class="btn btn-primary"><i class="fa fa-paper-plane"></i> {{ button_submit }}</button>
                            </form>
                            <div id="toastMessage" class="toast"></div>
                            <div id="loaderOverlay" class="loader-overlay"><div class="loader"></div> </div>
        
        
                        </div>
                    </div>
                </div>
            </div>
        </div>
    {{ column_right }}
    </div> 
     
     {{ footer }}
     
     <script>
 $('#loaderOverlay').hide();
// $(document).on('submit', '.quoteForm', function(e) {
//                 e.preventDefault();
//                 var form = $(this);
//                 $('.text-red').remove(); // Clear previous errors
//               $('#loaderOverlay').show();
//                 $.ajax({
//   url: form.attr('action'),
//   type: 'POST',
//   data: form.serialize(),
//   dataType: 'json',
//   success: function(response) {
//     $('#loaderOverlay').hide();
//     $('.text-red').remove(); // remove old validation messages
//     if (response.success) {
//         form[0].reset();
//          $('#profession_other_group').hide();
//         $('#profession_other').prop('required', false);
//       $('#toastMessage')
//         .text(response.success)
//         .removeClass('error')
//         .show();

//       setTimeout(function() {
//         $('#toastMessage').fadeOut();
//       }, 20000);

//       form[0].reset();
    
//     } 
//      else if (response.error) {
//       // if it's an object (like { field1: "msg", field2: "msg2" })
//       if (typeof response.error === 'object') {
//   $('.text-red').remove(); // clear old errors

//   let lastError = ''; // variable to store last message
//   $.each(response.error, function(key, value) {
//     $('#' + key).after('<div class="text-red">' + value + '</div>');
//     lastError = value; // keep updating with latest error
//   });

//   // show only the last one in toast
//   $('#toastMessage')
//     .text(lastError)
//     .addClass('error')
//     .show();

//   setTimeout(() => $('#toastMessage').fadeOut(), 20000);
// }

//       // if it's a string
//       else if (typeof response.error === 'string') {
//         $('#toastMessage')
//           .text(response.error)
//           .addClass('error')
//           .show();
//       }

//       setTimeout(function() {
//         $('#toastMessage').fadeOut();
//       }, 20000);
//     }
//   }
 
// });

//             });
</script>